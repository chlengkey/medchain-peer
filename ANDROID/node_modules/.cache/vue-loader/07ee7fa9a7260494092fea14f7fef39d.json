{"remainingRequest":"/home/skynet/Documents/MedicalChain/ANDROID/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/skynet/Documents/MedicalChain/ANDROID/src/components/Tokenization.vue?vue&type=template&id=f311f20a","dependencies":[{"path":"/home/skynet/Documents/MedicalChain/ANDROID/src/components/Tokenization.vue","mtime":1621091598713},{"path":"/home/skynet/Documents/MedicalChain/ANDROID/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/skynet/Documents/MedicalChain/ANDROID/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/skynet/Documents/MedicalChain/ANDROID/node_modules/vue-loader-v16/dist/templateLoader.js","mtime":1616796459000},{"path":"/home/skynet/Documents/MedicalChain/ANDROID/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/skynet/Documents/MedicalChain/ANDROID/node_modules/vue-loader-v16/dist/index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Cgk8IS0tPGRpdiBAY2xpY2s9InRva2VuT3BlbigpIi0tPgoJPGRpdiBAY2xpY2s9InNob3dNb2RhbCgpIgoJCWNsYXNzPSJiZy1vcmFuZ2UtNTAwIGgtZnVsbCByb3VuZGVkLW1kIHAtMyB0ZXh0LXdoaXRlIHRleHQteHMgZm9udC1ib2xkIiBzdHlsZT0iZm9udC1mYW1pbHk6J0ludGVyJyI+CgkJPGlvbi1pY29uIGNsYXNzPSJtci0xIiA6aWNvbj0idGltZXIiIC8+CgkJPGlvbi1pY29uIDppY29uPSJsb2NrQ2xvc2VkIiAvPgoJCTxici8+QnVhdCBUb2tlbjxici8+CgkJPHNwYW4gY2xhc3M9ImZvbnQtbm9ybWFsIj5NZW1iYW50dSBwZW1lcmlrc2FhbiBsZWJpaCBhbWFuPC9zcGFuPgogICAgPC9kaXY+Cg=="},{"version":3,"sources":["/home/skynet/Documents/MedicalChain/ANDROID/src/components/Tokenization.vue"],"names":[],"mappings":";CACC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;CAC/B,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACvB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACpG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EACtC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;EAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnB,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC7D,CAAC,CAAC,CAAC,CAAC,CAAC","file":"/home/skynet/Documents/MedicalChain/ANDROID/src/components/Tokenization.vue","sourceRoot":"","sourcesContent":["<template>\n\t<!--<div @click=\"tokenOpen()\"-->\n\t<div @click=\"showModal()\"\n\t\tclass=\"bg-orange-500 h-full rounded-md p-3 text-white text-xs font-bold\" style=\"font-family:'Inter'\">\n\t\t<ion-icon class=\"mr-1\" :icon=\"timer\" />\n\t\t<ion-icon :icon=\"lockClosed\" />\n\t\t<br/>Buat Token<br/>\n\t\t<span class=\"font-normal\">Membantu pemeriksaan lebih aman</span>\n    </div>\n</template>\n\n<script type=\"text/javascript\">\n\n\t// Modules\n\timport TokenModal from '@/modules/TokenModal.vue'\n\timport { modalController, alertController } from '@ionic/vue';\n\n\t// Components and Icons\n\timport { timer, lockClosed } from 'ionicons/icons';\n\n\t// API\n\timport {VUE_APP_API} from '@/function.js'\n\tconst axios = require('axios');\n\t\n\texport default{\n\t\tdata(){\n\t\t\treturn{\n\t\t\t\tclinicData : [\n\t\t\t\t\t{\n\t\t\t\t\t\tklinikNama : \"Puskesmas Tomohon\",\n\t\t\t\t\t\tklinikAlamat : \"Jl. Tomohon\",\n\t\t\t\t\t\tklinikId     : \"public_key\"\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tlockClosed,\n\t\t\t\ttimer,\n\t\t\t\ttokenLocal  : \"\",\n\t\t\t\texpiredTime : 9999999999999,\n\t\t\t}\n\t\t},\n\t\tprops : ['token'],\n\t\tmethods : {\n\t\t\t\n\t\t\tshowModal : async function(){\n\t\t\t\tconst modal = await modalController.create({\n\t\t\t\t\tcomponent: TokenModal,\n\t\t\t\t})\n\t\t\t\tawait modal.present()\n\t\t\t},\n\t\t\t\n\t\t\tgetTimestamp : function() {\n\t\t\t\tconst timestamp = new Date();\n\t\t\t\tconst timestampNow = timestamp.getTime();\n\t\t\t\treturn timestampNow;\n\t\t\t},\n\n\t\t\tgetTokenExpireTime : function() {\n\t\t\t\treturn parseInt((this.expiredTime - this.getTimestamp()) / 3600000 * 60); \n\t\t\t},\n\n\t\t\tgenerateToken : function(){\n\n\t\t\t\t// PAYLOAD\n\t\t\t\t// enkripsi private_key dengan menggunakan public_key fasilitas kesehatan\n\t\t\t\taxios.get(VUE_APP_API + \"/token/generate\")\n\t\t\t\t\t.then(response => {\n\t\t\t\t\t\tconsole.log(response);\n\t\t\t\t\t})\n\n\t\t\t\t//const min = 10000;\n\t\t\t\t//const max = 99999;\n\t\t\t\t//const token = Math.floor(Math.random() * (max-min)) + min;\n\t\t\t\t//return token\n\t\t\t},\n\t\t\t\n\t\t\tgetToken : function(){\n\t\t\t\treturn this.tokenLocal;\n\t\t\t},\n\n\t\t\ttokenOpen : function(){\n\n\t\t\t\t/* \n\t\t\t\t\tMengecek Jika Token sudah expire atau belum\n\t\t\t\t*/\n\t\t\t\tif (this.getTokenExpireTime() <= 0) {\n\t\t\t\t\tthis.tokenExpired();\n\t\t\t\t\tthis.tokenLocal = \"\";\n\t\t\t\t\tthis.expiredTime = 0;\n\t\t\t\t}\n\n\t\t\t\telse {\n\n\t\t\t\t\t/*\n\t\t\t\t\t\tMembuat Token Baru\n\t\t\t\t\t*/\n\t\t\t\t\tif (this.tokenLocal == \"\") {\n\t\t\t\t\t\tthis.tokenNew();\n\t\t\t\t\t}\n\n\t\t\t\t\t/*\n\t\t\t\t\t\tMenampilkan Token yang sudah di generate\n\t\t\t\t\t*/\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.tokenMain();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tasync tokenNew(){\n\t\t\t\tconst app = this;\n\t\t\t\tconst alert = await alertController.create({\n\t\t\t\t\theader    : 'Buat Token',\n\t\t\t\t\tsubHeader : \"Anda Setuju?\",\n\t\t\t\t\tmessage   : \"<p class='text-sm'>Dengan membuat token anda setuju memberikan data rekam medis anda</p>\",\n\t\t\t\t\tbuttons   : ['Batal',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttext:'Setuju', \n\t\t\t\t\t\t\thandler : () => {\n\t\t\t\t\t\t\t\tapp.tokenLocal  = app.generateToken();\n\t\t\t\t\t\t\t\tapp.expiredTime = app.getTimestamp() + 1800000;\n\t\t\t\t\t\t\t\t//app.tokenMain();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t\tawait alert.present();\n\t\t\t},\n\n\t\t\tasync tokenExpired(){\n\t\t\t\tconst app = this;\n\t\t\t\tconst alert = await alertController.create({\n\t\t\t\t\theader    : 'Mengambil Token Gagal',\n\t\t\t\t\tsubHeader : \"Token sudah expire\",\n\t\t\t\t\tmessage   : \"<p class='text-sm'>Token anda telah melewati batas waktu yang ditentukan, silahkan buat lagi</p>\",\n\t\t\t\t\tbuttons   : [{text:'Ok', handler : () => {\n\t\t\t\t\t\tapp.tokenNew();\n\t\t\t\t\t}}]\n\t\t\t\t});\n\t\t\t\tawait alert.present();\n\t\t\t\tawait alert.onDidDismiss();\t\n\t\t\t},\n\n\t\t\tasync tokenMain() {\n\t\t\t\tlet htmlAlert = \"\";\n\t\t\t\thtmlAlert += \"<p class='text-sm'>\"\n\t\t\t\thtmlAlert += \"Silahkan memberikan token kepada staff medis untuk mengizinkan pengaksesan data rekam medis anda</p>\";\n\t\t\t\thtmlAlert += \"<p class='text-center text-4xl text-orange-600 font-bold'>\" + this.tokenLocal + \"</p>\";\n\t\t\t\thtmlAlert += \"<p class='text-xs text-center'>Sisa Waktu : <span class='text-red-500 font-bold'>\" + this.getTokenExpireTime() + \" Menit</span></p>\"\n\n\t\t\t\tconst alert = await alertController.create({\n\t\t\t\t\tcssClass: 'my-custom-class',\n\t\t\t\t\theader: 'Token',\n\t\t\t\t\tsubHeader: 'Berhasil dibuat',\n\t\t\t\t\tmessage: htmlAlert,\n\t\t\t\t\tbuttons: ['OK'],\n\t\t\t\t});\n\t\t\t\tawait alert.present();\n\t\t\t}\n\n\t\t},\n\n\t\tcreated(){\n\t\t\tif (this.token) {\n\t\t\t\tthis.tokenLocal = this.token;\n\t\t\t}\n\t\t},\n\t}\n</script>"]}]}